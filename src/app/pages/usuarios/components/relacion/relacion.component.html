<div class="mx-auto">
    <!-- Toasts -->
    <p-toast></p-toast>

    <!-- Confirm Dialog -->
    <p-confirmDialog></p-confirmDialog>

    <!-- Header Moderno -->
    <div
        class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 p-8 rounded-2xl bg-gradient-to-r from-primary/20 to-primary/10 shadow-md border border-primary/30">
        <!-- Icono y Título -->
        <div class="flex items-center gap-4">
            <div class="bg-white dark:bg-gray-800 rounded-full p-5 shadow-lg flex items-center justify-center -mt-4">
                <i class="pi pi-verified text-primary text-3xl"></i>
            </div>
            <div class="flex flex-col">
                <h2 class="text-3xl font-extrabold text-primary dark:text-primary-300 tracking-tight">
                    Relación de Usuarios
                </h2>
                <span class="text-sm text-gray-600 dark:text-gray-400">
                    Gestione y administre los usuarios de la plataforma desde este
                    módulo.
                </span>
            </div>
        </div>

        <button pButton label="Agregar Usuario" icon="pi pi-plus" class="p-button-rounded p-button-success"
            (click)="agregarFila()"></button>
    </div>

    <hr class="my-4 border-primary/30 dark:border-primary/50 rounded" />

    <!-- Tabla -->
    <p-table #dt [value]="usuarios" dataKey="id" editMode="row" [paginator]="true" [rows]="5" responsiveLayout="scroll"
        class="rounded-2xl shadow-md overflow-hidden border border-gray-200 dark:border-gray-700">
        <ng-template pTemplate="header">
            <tr
                class="bg-gradient-to-r from-primary/10 to-primary/5 text-primary-800 dark:from-primary/20 dark:to-primary/10 dark:text-primary-200">
                <th class="px-4 py-3 text-left font-semibold">Clave Usuario</th>
                <th class="px-4 py-3 text-left font-semibold">Nombre</th>
                <th class="px-4 py-3 text-left font-semibold">Apellidos</th>
                <th class="px-4 py-3 text-left font-semibold">Checador User ID</th>
                <th class="px-4 py-3 text-center font-semibold">Acciones</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-usuario let-editing="editing" let-ri="rowIndex">
            <tr [pEditableRow]="usuario" class="hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors">
                <!-- Clave Usuario -->
                <td class="px-4 py-2">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText [(ngModel)]="usuario.chrClaveUsuario"
                                class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2" />
                        </ng-template>
                        <ng-template pTemplate="output">
                            <span class="font-medium text-gray-800 dark:text-gray-200">
                                {{ usuario.chrClaveUsuario }}
                            </span>
                        </ng-template>
                    </p-cellEditor>
                </td>

                <!-- Nombre -->
                <td class="px-4 py-2">
                    <span class="text-gray-700 dark:text-gray-300 font-medium">
                        {{ usuario.chrNombre }}
                    </span>
                </td>

                <!-- Apellidos -->
                <td class="px-4 py-2">
                    <span class="text-gray-700 dark:text-gray-300">
                        {{ usuario.chrPaterno }} {{ usuario.chrMaterno }}
                    </span>
                </td>

                <!-- Checador User ID -->
                <td class="px-4 py-2">
                    <p-cellEditor>
                        <ng-template pTemplate="input">
                            <input pInputText [(ngModel)]="usuario.checador_user_id"
                                class="w-full rounded-lg border border-gray-300 dark:border-gray-600 p-2" />
                        </ng-template>
                        <ng-template pTemplate="output">
                            <p-tag severity="info" [value]="usuario.checador_user_id" class="rounded-lg">
                            </p-tag>
                        </ng-template>
                    </p-cellEditor>
                </td>

                <!-- Acciones -->
                <td class="px-4 py-2 text-center flex gap-2 justify-center">
                    <!-- Guardar -->
                    <p-button *ngIf="editing" icon="pi pi-check" [text]="true" [raised]="true" severity="success"
                        class="!rounded-full" title="Guardar" (click)="guardarUsuario(usuario, ri)"></p-button>

                    <!-- Cancelar -->
                    <p-button *ngIf="editing" icon="pi pi-times" [text]="true" [raised]="true" severity="danger"
                        class="!rounded-full" title="Cancelar" (click)="cancelarEdicion(usuario, ri)"></p-button>

                    <!-- Eliminar -->
                    <p-button icon="pi pi-trash" [text]="true" [raised]="true" severity="danger" class="!rounded-full"
                        title="Eliminar" (click)="confirmarEliminar(usuario.id)"></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>

</div>